<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>不是在改BUG，就是在改BUG的路上 - &#x27;ldconfig: &#x2F;usr&#x2F;lib&#x2F;wsl&#x2F;lib&#x2F;libcuda.so.1 is not a symbolic link&#x27;</title>

      
        <link rel="alternate" type="application/atom+xml" title="RSS" href="https://blog.kiyoko.io/atom.xml">
      

      
          <script src="https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js"></script>
          
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">

          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/mathtex-script-type.min.js" integrity="sha384-zWYbd0NBwgTsgIdFKVprSfTh1mbMPe5Hz1X3yY4Sd1h/K1cQoUe36OGwAGz/PcDy" crossorigin="anonymous"></script>
              
          <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"
                  onload="renderMathInElement(document.body);"></script>
              
          
      

      
          <link rel="stylesheet" href="https://blog.kiyoko.io/site.css">
          
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
          
      

      
      
    </head>

    <body>
        <div class="container">

            <div id="mobile-navbar" class="mobile-navbar">
              <div class="mobile-header-logo">
                <a href="/" class="logo">三天打鱼</a>
              </div>
              <div class="mobile-navbar-icon icon-out">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>

            <nav id="mobile-menu" class="mobile-menu slideout-menu slideout-menu-left">
              <ul class="mobile-menu-list">
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;blog.kiyoko.io">
                            Home
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;categories">
                            Categories
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;tags">
                            Tags
                        </a>
                    </li>
                
                    <li class="mobile-menu-item">
                        <a href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;about">
                            About
                        </a>
                    </li>
                
              </ul>
            </nav>

            <header id="header">
                <div class="logo"><a href="https:&#x2F;&#x2F;blog.kiyoko.io">三天打鱼</a></div>
                <nav class="menu">
                    <ul>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;blog.kiyoko.io">
                                    Home
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;categories">
                                    Categories
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;tags">
                                    Tags
                                </a>
                            </li>
                        
                            <li>
                                <a href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;about">
                                    About
                                </a>
                            </li>
                        
                    </ul>
                </nav>
            </header>

            <main>
                <div class="content" id="mobile-panel">
                    


<div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content always-active">
        <nav id="TableOfContents">
            <ul>
                
                <li>
                    <a href="https://blog.kiyoko.io/ldconfig-usr-lib-wsl-lib-libcuda-so-1-is-not-a-symbolic-link/#huan-jing" class="toc-link">环境</a>
                    
                </li>
                
                <li>
                    <a href="https://blog.kiyoko.io/ldconfig-usr-lib-wsl-lib-libcuda-so-1-is-not-a-symbolic-link/#wen-ti" class="toc-link">问题</a>
                    
                </li>
                
                <li>
                    <a href="https://blog.kiyoko.io/ldconfig-usr-lib-wsl-lib-libcuda-so-1-is-not-a-symbolic-link/#jie-jue-fang-fa" class="toc-link">解决方法</a>
                    
                </li>
                
                <li>
                    <a href="https://blog.kiyoko.io/ldconfig-usr-lib-wsl-lib-libcuda-so-1-is-not-a-symbolic-link/#yuan-yin" class="toc-link">原因</a>
                    
                </li>
                
                <li>
                    <a href="https://blog.kiyoko.io/ldconfig-usr-lib-wsl-lib-libcuda-so-1-is-not-a-symbolic-link/#can-kao" class="toc-link">参考</a>
                    
                </li>
                
            </ul>
        </nav>
    </div>
</div>


<article class="post">
    
    <header class="post__header">
        <h1 class="post__title">
            <a href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;ldconfig-usr-lib-wsl-lib-libcuda-so-1-is-not-a-symbolic-link&#x2F;">&#x27;ldconfig: &#x2F;usr&#x2F;lib&#x2F;wsl&#x2F;lib&#x2F;libcuda.so.1 is not a symbolic link&#x27;</a>
        </h1>
        <div class="post__meta">
            <span class="post__time">2022-01-17</span>
            
        </div>
    </header>

    <div class="post-content">
      <h3 id="huan-jing">环境</h3>
<pre data-lang="text" style="background-color:#2b303b;color:#c0c5ce;" class="language-text "><code class="language-text" data-lang="text"><span>版本          Windows 11 专业版
</span><span>版本          21H2
</span><span>安装日期       2022/1/13
</span><span>操作系统版本   22000.466
</span><span>体验          Windows 功能体验包 1000.22000.466.0
</span></code></pre>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> uname</span><span style="color:#bf616a;"> -a
</span><span style="color:#bf616a;">Linux</span><span> xeon 5.10.16.3-microsoft-standard-WSL2 </span><span style="color:#65737e;">#1 SMP Fri Apr 2 22:23:49 UTC 2021 x86_64 GNU/Linux
</span></code></pre>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> nvidia-smi
</span><span style="color:#bf616a;">Mon</span><span> Jan 17 21:32:44 2022
</span><span style="color:#bf616a;">+-----------------------------------------------------------------------------+
</span><span>| </span><span style="color:#bf616a;">NVIDIA-SMI</span><span> 495.53       Driver Version: 497.29       CUDA Version: 11.5     |
</span><span>|</span><span style="color:#bf616a;">-------------------------------+----------------------+----------------------+
</span><span>| </span><span style="color:#bf616a;">GPU</span><span>  Name        Persistence-M| </span><span style="color:#bf616a;">Bus-Id</span><span>        Disp.A | </span><span style="color:#bf616a;">Volatile</span><span> Uncorr. ECC |
</span><span>| </span><span style="color:#bf616a;">Fan</span><span>  Temp  Perf  Pwr:Usage/Cap|         </span><span style="color:#bf616a;">Memory-Usage </span><span>| </span><span style="color:#bf616a;">GPU-Util</span><span>  Compute M. |
</span><span>|                               |                      |               </span><span style="color:#bf616a;">MIG</span><span> M. |
</span><span style="color:#a3be8c;">|===============================+======================+======================</span><span>|
</span><span>|   </span><span style="color:#bf616a;">0</span><span>  NVIDIA GeForce ...  On   | </span><span style="color:#bf616a;">00000000:01:00.0</span><span>  On |                  </span><span style="color:#bf616a;">N/A </span><span>|
</span><span>|  </span><span style="color:#bf616a;">0</span><span>%   51C    P0    76W / 310W |   </span><span style="color:#bf616a;">2225MiB</span><span> /  8192MiB |     </span><span style="color:#bf616a;">N/A</span><span>      Default |
</span><span>|                               |                      |                  </span><span style="color:#bf616a;">N/A </span><span>|
</span><span style="color:#bf616a;">+-------------------------------+----------------------+----------------------+
</span><span>
</span><span style="color:#bf616a;">+-----------------------------------------------------------------------------+
</span><span>| </span><span style="color:#bf616a;">Processes:                                                                  </span><span>|
</span><span>|  </span><span style="color:#bf616a;">GPU</span><span>   GI   CI        PID   Type   Process name                  GPU Memory |
</span><span>|        </span><span style="color:#bf616a;">ID</span><span>   ID                                                   Usage      |
</span><span style="color:#a3be8c;">|=============================================================================</span><span>|
</span><span>|  </span><span style="color:#bf616a;">No</span><span> running processes found                                                 |
</span><span style="color:#bf616a;">+-----------------------------------------------------------------------------+
</span></code></pre>
<h3 id="wen-ti">问题</h3>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> sudo ldconfig
</span><span style="color:#bf616a;">ldconfig:</span><span> /usr/lib/wsl/lib/libcuda.so.1 is not a symbolic link
</span></code></pre>
<h3 id="jie-jue-fang-fa">解决方法</h3>
<ol>
<li>
<p>使用管理员权限执行 <code>cmd</code> 命令:</p>
<pre data-lang="cmd" style="background-color:#2b303b;color:#c0c5ce;" class="language-cmd "><code class="language-cmd" data-lang="cmd"><span>c:\Users\david&gt;</span><span style="color:#b48ead;">cd</span><span> c:\Windows\System32\lxss\lib
</span><span>c:\Windows\System32\lxss\lib&gt;</span><span style="color:#b48ead;">del</span><span> /s /q &quot;</span><span style="color:#a3be8c;">libcuda.so</span><span>&quot;
</span><span>c:\Windows\System32\lxss\lib&gt;</span><span style="color:#b48ead;">del</span><span> /s /q &quot;</span><span style="color:#a3be8c;">libcuda.so.1</span><span>&quot;
</span><span>c:\Windows\System32\lxss\lib&gt;</span><span style="color:#b48ead;">mklink</span><span> libcuda.so libcuda.so.</span><span style="color:#d08770;">1</span><span>.</span><span style="color:#d08770;">1
</span><span>c:\Windows\System32\lxss\lib&gt;</span><span style="color:#b48ead;">mklink</span><span> libcuda.so.</span><span style="color:#d08770;">1</span><span> libcuda.so.</span><span style="color:#d08770;">1</span><span>.</span><span style="color:#d08770;">1
</span></code></pre>
</li>
<li>
<p>在 <code>wsl</code> 中执行:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> ldconfig
</span></code></pre>
</li>
</ol>
<h3 id="yuan-yin">原因</h3>
<p><code>nvidia</code> 的驱动程序没有将 <code>so</code> 文件以软连接的形式创建，而通过 <code>man ldconfig</code> 命令可知:</p>
<pre data-lang="text" style="background-color:#2b303b;color:#c0c5ce;" class="language-text "><code class="language-text" data-lang="text"><span>    Note that ldconfig  will only look at files that are named lib*.so* (for regular shared objects) or ld-*.so* (for the dynamic loader itself).  Other files will be ignored. Also, ldconfig expects a certain pattern to how the symlinks are set up, like this example, where the middle file (libfoo.so.1 here) is the SONAME for the library:
</span><span>
</span><span>    libfoo.so -&gt; libfoo.so.1 -&gt; libfoo.so.1.12
</span></code></pre>
<p><code>ldconfig</code> 期望的文件是符合一定格式的 <code>symlinks</code>。</p>
<h3 id="can-kao">参考</h3>
<ul>
<li><a href="https://issueexplorer.com/issue/yuk7/ArchWSL/248">https://issueexplorer.com/issue/yuk7/ArchWSL/248</a></li>
</ul>

    </div>

    
    

    <div class="post-footer">
        
            
                <div class="post-tags">
                    
                        <a href="https://blog.kiyoko.io/tags/linux/">#linux</a>
                    
                        <a href="https://blog.kiyoko.io/tags/wsl/">#wsl</a>
                    
                </div>
            
            
                <div class="post-nav">
                    
                        <a class="previous" href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;archlinux-base-devel&#x2F;">‹ Arch Linux 安装 fakeroot</a>
                    
                    
                        <a class="next" href="https:&#x2F;&#x2F;blog.kiyoko.io&#x2F;opengl-01&#x2F;">搭建 OpenGL 环境环境 ›</a>
                    
                    
                    
                </div>
            

        

    </div>

    
    
</article>


                </div>
            </main>

            
            
        </div>

      
          <script type="text/javascript" src="https://blog.kiyoko.io/even.js" ></script>
      
    </body>

</html>
